!function(e){function t(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(s,a,function(t){return e[t]}.bind(null,a));return s},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(){},function(e,t,r){"use strict";r.r(t);r(0);var s=function(){function e(e){this.classesForm={wrapperClass:"checkform-wrapper",formClass:"checkform-form",blockClass:"block",errorClass:"block__error",labelClass:"block__label",btnClass:"checkform-btn",focusClass:"js-input-focus",blockErrorClass:"error",blockGoodClass:"good",maskClass:"mask"},this.validObj={nicknameReg:/^[a-zA-Z]/,nicknameMinLength:1,nicknameMaxLength:15,fullNameReg:/^[a-zA-Z]/,fullNameMinLength:1,fullNameMaxLength:15,emailReg:/^[a-zA-Z]/,emailMinLength:1,passwordReg:/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^\w\s]).{6,}/,dateReg:/^\d{4}[./-]\d{2}[./-]\d{2}$/,telReg:/^(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/,telMinLength:1,telMaxLength:20,fileSize:10025711,fileType:"image",bankNumber:/(?<=^|[^0-9])[0-9]{16}(?=[^0-9]|$)|[0-9]{4}[-| |_][0-9]{4}[-| |_][0-9]{4}[-| |_][0-9]{4}/,bankDate:/^\d{2}[.]\d{2}$/,bankBackNum:/^\d{3}/},this.options=e,this.wrapperClasses()}return e.prototype.wrapperClasses=function(){var e=document.querySelector("."+this.classesForm.wrapperClass);!0===this.options.errorMessages?e.classList.add("error-show"):e.classList.remove("error-show")},e.prototype.showError=function(e){var t=e.parentElement;t.classList.contains("mask")&&(t=t.parentElement),t.classList.remove(""+this.classesForm.blockGoodClass),t.classList.add(""+this.classesForm.blockErrorClass)},e.prototype.hideError=function(e){var t=e.parentElement;t.classList.contains("mask")&&(t=t.parentElement),t.classList.remove(""+this.classesForm.blockErrorClass),t.classList.add(""+this.classesForm.blockGoodClass)},e}(),a=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),o=function(e){function t(t){var r=e.call(this,t)||this;return r.maskInputs=document.querySelectorAll(".checkform__mask"),r.maskedNumber="XdDmMyY9",r.setupMask(),r.activateMask(),r}return a(t,e),t.prototype.setupMask=function(){for(var e=0;e<this.maskInputs.length;e++)this.createMask(this.maskInputs[e])},t.prototype.createMask=function(e){var t=e.getAttribute("placeholder");e.setAttribute("maxlength",""+t.length),e.setAttribute("data-placeholder",t),e.removeAttribute("placeholder");var r='<span class="'+this.classesForm.maskClass+'">\n      <span aria-hidden="true" id="'+e.id+'Mask"><i></i>'+t+"</span>"+e.outerHTML+"</span>";e.outerHTML=r},t.prototype.activateMask=function(){this.handleValueChange=this.handleValueChange.bind(this),this.maskInputs=document.querySelectorAll(".mask .checkform__mask");for(var e=0;e<this.maskInputs.length;e++)this.maskInputs[e].addEventListener("keyup",this.handleValueChange)},t.prototype.handleValueChange=function(e){var t=e.srcElement,r=t.id;switch(e.keyCode){case 20:case 17:case 18:case 16:case 37:case 38:case 39:case 40:case 9:return}t.value=""+this.handleCurrentValue(e),document.getElementById(r+"Mask").innerHTML=this.setValueMask(e)},t.prototype.handleCurrentValue=function(e){for(var t=e.target,r=t.getAttribute("data-placeholder"),s=t.value,a=r.length,o="",n=s.replace(/\D/g,""),i=0,c=0;i<a;i++){var l=!isNaN(parseInt(n[c],10)),u=0<=this.maskedNumber.indexOf(r[i]);if(u&&l)o+=n[c++];else{if(u&&!l)return o;o+=r[i]}}return o},t.prototype.setValueMask=function(e){var t=e.target,r=t.value;return"<i>+7"+r+"</i>"+t.getAttribute("data-placeholder").substr(r.length)},t}(s),n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.customValid=function(){this.options.customValid?this.validObj=Object.assign(this.validObj,this.options.customValid):console.log("nothing to custom in validObj")},t.prototype.customClassesForm=function(){this.options.customClassesForm?this.classesForm=Object.assign(this.classesForm,this.options.customClassesForm):console.log("nothing to custom in classesForm")},t}(o),c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}();new(function(e){function t(t){var r=e.call(this,t)||this;return r.customClassesForm(),r.customValid(),r.setup(),r}return c(t,e),t.prototype.setup=function(){var e=document.querySelector("."+this.classesForm.btnClass);this.validation=this.validation.bind(this),e.addEventListener("click",this.validation)},t.prototype.regCheck=function(e,t,r,s,a){void 0===s&&(s=0),void 0===a&&(a=1e3),e.length<s||e.length>a?this.showError(t):r.test(e)?(this.hideError(t),this.checkSubstring(t,e),this.checkBlackList(t,e)):this.showError(t)},t.prototype.checkSubstring=function(e,t){for(var r=0;r<this.options.checkSubstr.length;r++)this.options.checkSubstr[r].id===e.getAttribute("id")&&(t.includes(this.options.checkSubstr[r].substr)?this.hideError(e):this.showError(e))},t.prototype.checkBlackList=function(e,t){for(var r=0;r<this.options.blackList.length;r++)t.includes(this.options.blackList[r])&&this.showError(e)},t.prototype.validation=function(e){var t=this;e.preventDefault(),document.querySelectorAll("[data-valid=true]").forEach((function(e){var r=e.value;switch(e.id){case"nickname":var s=new RegExp(t.validObj.nicknameReg),a=t.validObj.nicknameMinLength,o=t.validObj.nicknameMaxLength;t.regCheck(r,e,s,a,o);break;case"fullname":s=new RegExp(t.validObj.fullNameReg),a=t.validObj.fullNameMinLength,o=t.validObj.fullNameMaxLength;t.regCheck(r,e,s,a,o);break;case"email":s=new RegExp(t.validObj.emailReg),a=t.validObj.emailMinLength;t.regCheck(r,e,s,a);break;case"password":s=new RegExp(t.validObj.passwordReg);t.regCheck(r,e,s);break;case"date":s=new RegExp(t.validObj.dateReg);t.regCheck(r,e,s);break;case"tel":s=new RegExp(t.validObj.telReg),a=t.validObj.telMinLength,o=t.validObj.telMaxLength;t.regCheck(r,e,s,a,o);break;case"checkbox":e.checked?t.hideError(e):t.showError(e);break;case"file":var n=e.files[0];""===r?t.showError(e):n.type.startsWith(t.validObj.fileType)?t.hideError(e):(t.showError(e),!(n.size<t.validObj.fileSize)&&t.showError(e));break;case"textarea":""===r?t.showError(e):(t.hideError(e),t.checkSubstring(e,r));break;case"bankCardNumber":s=new RegExp(t.validObj.bankNumber),o=19,a=12;t.regCheck(r,e,s,a,o);break;case"bankDate":s=new RegExp(t.validObj.bankDate),a=4;t.regCheck(r,e,s,a);break;case"bankBackNum":s=new RegExp(t.validObj.bankBackNum),a=3,o=3;t.regCheck(r,e,s,a,o)}}))},t}(i))({customValid:{nicknameReg:/^[a-zA-Z]/,nicknameMaxLength:11},errorMessages:!0,customClassesForm:{wrapperClass:"checkform-wrapper",formClass:"checkform-form",blockClass:"block",errorClass:"block__error",labelClass:"block__label",btnClass:"checkform-btn",focusClass:"js-input-focus"},checkSubstr:[{id:"nickname",substr:"karim"},{id:"email",substr:"k4r1"}],blackList:["lol","kek"]})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdHMvZm9ybS50cyIsIndlYnBhY2s6Ly8vLi90cy9tYXNrLnRzIiwid2VicGFjazovLy8uL3RzL2N1c3RvbVBhcmFtLnRzIiwid2VicGFjazovLy8uL3RzL3NjcmlwdC50cyIsIndlYnBhY2s6Ly8vLi90cy9jaGVja2Zvcm0udHMiXSwibmFtZXMiOlsiZSIsImNsYXNzZXNGb3JtIiwid3JhcHBlckNsYXNzIiwiZm9ybUNsYXNzIiwiYmxvY2tDbGFzcyIsImVycm9yQ2xhc3MiLCJsYWJlbENsYXNzIiwiYnRuQ2xhc3MiLCJmb2N1c0NsYXNzIiwiYmxvY2tFcnJvckNsYXNzIiwiYmxvY2tHb29kQ2xhc3MiLCJtYXNrQ2xhc3MiLCJ2YWxpZE9iaiIsIm5pY2tuYW1lUmVnIiwibmlja25hbWVNaW5MZW5ndGgiLCJuaWNrbmFtZU1heExlbmd0aCIsImZ1bGxOYW1lUmVnIiwiZnVsbE5hbWVNaW5MZW5ndGgiLCJmdWxsTmFtZU1heExlbmd0aCIsImVtYWlsUmVnIiwiZW1haWxNaW5MZW5ndGgiLCJwYXNzd29yZFJlZyIsImRhdGVSZWciLCJ0ZWxSZWciLCJ0ZWxNaW5MZW5ndGgiLCJ0ZWxNYXhMZW5ndGgiLCJmaWxlU2l6ZSIsImZpbGVUeXBlIiwiYmFua051bWJlciIsImJhbmtEYXRlIiwiYmFua0JhY2tOdW0iLCJ0aGlzIiwib3B0aW9ucyIsIndyYXBwZXJDbGFzc2VzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZXJyb3JNZXNzYWdlcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNob3dFcnJvciIsInBhcmVudEVsZW1lbnQiLCJjb250YWlucyIsImhpZGVFcnJvciIsImMiLCJtYXNrSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsIm1hc2tlZE51bWJlciIsInNldHVwTWFzayIsImFjdGl2YXRlTWFzayIsImxlbmd0aCIsImNyZWF0ZU1hc2siLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpZCIsIm91dGVySFRNTCIsImhhbmRsZVZhbHVlQ2hhbmdlIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcmNFbGVtZW50Iiwia2V5Q29kZSIsInZhbHVlIiwiaGFuZGxlQ3VycmVudFZhbHVlIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJzZXRWYWx1ZU1hc2siLCJ0YXJnZXQiLCJyZXBsYWNlIiwiaXNOYU4iLCJwYXJzZUludCIsImluZGV4T2YiLCJzdWJzdHIiLCJjdXN0b21WYWxpZCIsIk9iamVjdCIsImFzc2lnbiIsImNvbnNvbGUiLCJsb2ciLCJjdXN0b21DbGFzc2VzRm9ybSIsInNldHVwIiwidmFsaWRhdGlvbiIsInJlZ0NoZWNrIiwidGVzdCIsImNoZWNrU3Vic3RyaW5nIiwiY2hlY2tCbGFja0xpc3QiLCJjaGVja1N1YnN0ciIsImluY2x1ZGVzIiwiYmxhY2tMaXN0IiwicHJldmVudERlZmF1bHQiLCJmb3JFYWNoIiwiUmVnRXhwIiwiY2hlY2tlZCIsImZpbGVzIiwidHlwZSIsInN0YXJ0c1dpdGgiLCJzaXplIl0sIm1hcHBpbmdzIjoiYUFJQSxjQUdBLFFBQ0Esb0JBR0EsWUFDQSxJQUNBLEtBQ0EsWUFVQSxPQU5DLEVBQUQsaUNBR0EsT0FHQSxVQXZCQSxTQTRCQyxFQUFELElBR0EsTUFHQSxvQkFDQSxVQUNBLDJCQUEwQyx1QkFLMUMsZ0JBQ0EsZ0RBQ0EsNENBQXdELGlCQUV4RCxzQ0FBaUQsWUFRakQsa0JBRUEsR0FEQSxjQUNBLGFBQ0EscURBQ0EsMEJBR0EsR0FGQSxPQUNBLG1DQUF5Qyx3QkFDekMsMkRBQWdILGFBQXFCLFVBQXJJLElBQ0EsVUFJQSxnQkFDQSxzQkFDQSxXQUEyQixrQkFDM0IsV0FBaUMsVUFFakMsT0FEQyxFQUFELFdBQ0EsR0FJQSxrQkFBc0Qsa0RBR3RELE9BSUEsUyw0REM1RUFBLEVBQUEsV0ErQ0UsY0E1Q08sS0FBQUMsWUFBNEIsQ0FDakNDLGFBQWMsb0JBQ2RDLFVBQVcsaUJBQ1hDLFdBQVksUUFDWkMsV0FBWSxlQUNaQyxXQUFZLGVBQ1pDLFNBQVUsZ0JBQ1ZDLFdBQVksaUJBQ1pDLGdCQUFpQixRQUNqQkMsZUFBZ0IsT0FDaEJDLFVBQVcsUUFHTixLQUFBQyxTQUFzQixDQUMzQkMsWUFBYSxZQUNiQyxrQkFBbUIsRUFDbkJDLGtCQUFtQixHQUVuQkMsWUFBYSxZQUNiQyxrQkFBbUIsRUFDbkJDLGtCQUFtQixHQUVuQkMsU0FBVSxZQUNWQyxlQUFnQixFQUVoQkMsWUFBYSx1REFFYkMsUUFBUyw4QkFHVEMsT0FBUSxzQ0FDUkMsYUFBYyxFQUNkQyxhQUFjLEdBRWRDLFNBQVUsU0FDVkMsU0FBVSxRQUVWQyxXQUFZLDJGQUVaQyxTQUFVLGtCQUVWQyxZQUFhLFVBSWJDLEtBQUtDLFFBQUwsRUFDQUQsS0FBS0UsaUJBc0NULE9BaENTLFlBQUFBLGVBQVAsV0FDRSxJQUFJLEVBQXVCQyxTQUFTQyxjQUFjLElBQUlKLEtBQUs5QixZQUFZQyxlQUNuRSxJQUFBNkIsS0FBS0MsUUFBUUksY0FDZixFQUFRQyxVQUFVQyxJQUFJLGNBRXRCLEVBQVFELFVBQVVFLE9BQU8sZUFPdEIsWUFBQUMsVUFBUCxZQUNFLElBQUksRUFBc0IsRUFBTUMsY0FDNUIsRUFBT0osVUFBVUssU0FBUyxVQUM1QixFQUFTLEVBQU9ELGVBRWxCLEVBQU9KLFVBQVVFLE9BQU8sR0FBR1IsS0FBSzlCLFlBQVlTLGdCQUM1QyxFQUFPMkIsVUFBVUMsSUFBSSxHQUFHUCxLQUFLOUIsWUFBWVEsa0JBTXBDLFlBQUFrQyxVQUFQLFlBQ0UsSUFBSSxFQUFzQixFQUFNRixjQUM1QixFQUFPSixVQUFVSyxTQUFTLFVBQzVCLEVBQVMsRUFBT0QsZUFFbEIsRUFBT0osVUFBVUUsT0FBTyxHQUFHUixLQUFLOUIsWUFBWVEsaUJBQzVDLEVBQU80QixVQUFVQyxJQUFJLEdBQUdQLEtBQUs5QixZQUFZUyxpQkFFN0MsRUF2RkEsRyxpV0NBQSxjQVNFLGtCQUFBa0MsRUFDRSxnQkFBYyxLLE9BQ2QsRUFBS0MsV0FBYVgsU0FBU1ksaUJBQWlCLG9CQUM1QyxFQUFLQyxhQUFlLFdBQ3BCLEVBQUtDLFlBQ0wsRUFBS0MsZSxFQXNHVCxPQXBIc0MsT0FvQjdCLFlBQUFELFVBQVAsV0FDRSxJQUFLLElBQUksRUFBSSxFQUFHLEVBQUlqQixLQUFLYyxXQUFXSyxPQUFRLElBQzFDbkIsS0FBS29CLFdBQVdwQixLQUFLYyxXQUFMLEtBT2IsWUFBQU0sV0FBUCxZQUNFLElBQUksRUFBc0IsRUFBTUMsYUFBYSxlQUM3QyxFQUFNQyxhQUFhLFlBQWEsR0FBRyxFQUFZSCxRQUMvQyxFQUFNRyxhQUFhLG1CQUFuQixHQUNBLEVBQU1DLGdCQUFnQixlQUV0QixJQUFJLEVBQWMsZ0JBQWdCdkIsS0FBSzlCLFlBQVlVLFVBQVMsMENBQzNCLEVBQU00QyxHQUFFLGdCQUR2QixFQUNrRCxVQUFVLEVBQU1DLFVBQVMsVUFDN0YsRUFBTUEsVUFBTixHQU1LLFlBQUFQLGFBQVAsV0FFRWxCLEtBQUswQixrQkFBb0IxQixLQUFLMEIsa0JBQWtCQyxLQUFLM0IsTUFDckRBLEtBQUtjLFdBQWFYLFNBQVNZLGlCQUFpQiwwQkFDNUMsSUFBSyxJQUFJLEVBQUksRUFBRyxFQUFJZixLQUFLYyxXQUFXSyxPQUFRLElBRTFDbkIsS0FBS2MsV0FBTCxHQUFtQmMsaUJBQWlCLFFBQVM1QixLQUFLMEIsb0JBTy9DLFlBQUFBLGtCQUFQLFlBQTZDLElBQ3ZDLEVBQTBCLEVBQU1HLFdBQ2hDLEVBQUssRUFBTUwsR0FFZixPQUFRLEVBQU1NLFNBQ1osS0FBSyxHQUNMLEtBQUssR0FDTCxLQUFLLEdBQ0wsS0FBSyxHQUNMLEtBQUssR0FDTCxLQUFLLEdBQ0wsS0FBSyxHQUNMLEtBQUssR0FDTCxLQUFLLEVBQ0gsT0FLSixFQUFNQyxNQUFRLEdBQUcvQixLQUFLZ0MsbUJBQUwsR0FDakI3QixTQUFTOEIsZUFBa0IsRUFBRSxRQUFRQyxVQUFZbEMsS0FBS21DLGFBQUwsSUFNNUMsWUFBQUgsbUJBQVAsWUFRRSxRQVBJLEVBQTBCLEVBQU1JLE9BQ2hDLEVBQXNCLEVBQU1mLGFBQWEsb0JBQ3pDLEVBQWdCLEVBQU1VLE1BQ3RCLEVBQTRCLEVBQVlaLE9BQ3hDLEVBQVcsR0FDWCxFQUF3QixFQUFNa0IsUUFBUSxNQUFPLElBRXhDLEVBQUksRUFBRyxFQUFJLEVBQUcsSUFBdUIsSUFBSyxDQUFDLElBRTVDLEdBQVNDLE1BQU1DLFNBQVMsS0FBa0IsS0FDMUMsRUFBc0UsR0FBN0N2QyxLQUFLZ0IsYUFBYXdCLFFBQVEsTUFFdkQsR0FBSSxLQUNGLEdBQVksRUFBYyxTQUQ1QixDQUVPLEdBQUksSUFBa0IsRUFDM0IsT0FBTyxFQUVQLEdBQVksTUFHbEIsT0FBTyxHQU9GLFlBQUFMLGFBQVAsWUFBd0MsSUFDbEMsRUFBMEIsRUFBTUMsT0FDaEMsRUFBZ0IsRUFBTUwsTUFFMUIsTUFBTyxVQUFhLE9BRE0sRUFBTVYsYUFBYSxvQkFDTm9CLE9BQU8sRUFBTXRCLFNBRXhELEVBcEhBLENBQUFsRCxHLGlXQ0RBLDJCLCtDQXdCQSxPQXhCeUMsT0FNaEMsWUFBQXlFLFlBQVAsV0FDTTFDLEtBQUtDLFFBQVF5QyxZQUNmMUMsS0FBS25CLFNBQVc4RCxPQUFPQyxPQUFPNUMsS0FBS25CLFNBQVVtQixLQUFLQyxRQUFReUMsYUFFMURHLFFBQVFDLElBQUksa0NBT1QsWUFBQUMsa0JBQVAsV0FDTS9DLEtBQUtDLFFBQVE4QyxrQkFDZi9DLEtBQUs5QixZQUFjeUUsT0FBT0MsT0FBTzVDLEtBQUs5QixZQUFhOEIsS0FBS0MsUUFBUThDLG1CQUVoRUYsUUFBUUMsSUFBSSxxQ0FHbEIsRUF4QkEsSSxpV0NFdUIsSUNBdkIsWUFLRSxrQkFBQWpDLEVBQ0UsZ0JBQWMsSyxPQUNkLEVBQUtrQyxvQkFDTCxFQUFLTCxjQUNMLEVBQUtNLFEsRUFnSlQsT0F6SnVDLE9BWTdCLFlBQUFBLE1BQVIsV0FDRSxJQUFNLEVBQW1CN0MsU0FBU0MsY0FBYyxJQUFJSixLQUFLOUIsWUFBWU0sVUFFckV3QixLQUFLaUQsV0FBYWpELEtBQUtpRCxXQUFXdEIsS0FBSzNCLE1BRXZDLEVBQUk0QixpQkFBaUIsUUFBUzVCLEtBQUtpRCxhQUc5QixZQUFBQyxTQUFQLHlCQUE4RCxrQkFBZSxlQUN2RSxFQUFJL0IsT0FBSixHQUEwQixFQUFJQSxPQUFKLEVBQzVCbkIsS0FBS1MsVUFBTCxHQUNVLEVBQUkwQyxLQUFKLElBR1JuRCxLQUFLWSxVQUFMLEdBQ0FaLEtBQUtvRCxlQUFMLEtBQ0FwRCxLQUFLcUQsZUFBTCxNQUpBckQsS0FBS1MsVUFBTCxJQVFDLFlBQUEyQyxlQUFQLGNBQ0UsSUFBSyxJQUFJLEVBQUksRUFBRyxFQUFJcEQsS0FBS0MsUUFBUXFELFlBQVluQyxPQUFRLElBQy9DbkIsS0FBS0MsUUFBUXFELFlBQWIsR0FBNEI5QixLQUFPLEVBQU1ILGFBQWEsUUFDcEQsRUFBSWtDLFNBQVN2RCxLQUFLQyxRQUFRcUQsWUFBYixHQUE0QmIsUUFDM0N6QyxLQUFLWSxVQUFMLEdBRUFaLEtBQUtTLFVBQUwsS0FNRCxZQUFBNEMsZUFBUCxjQUNFLElBQUssSUFBSSxFQUFJLEVBQUcsRUFBSXJELEtBQUtDLFFBQVF1RCxVQUFVckMsT0FBUSxJQUM3QyxFQUFJb0MsU0FBU3ZELEtBQUtDLFFBQVF1RCxVQUFiLEtBQ2Z4RCxLQUFLUyxVQUFMLElBS0ksWUFBQXdDLFdBQVYsdUJBQ0UsRUFBTVEsaUJBQ2F0RCxTQUFTWSxpQkFBaUIscUJBQ2xDMkMsU0FBUSxZQUNqQixJQUFJLEVBQWMsRUFBTTNCLE1BQ3hCLE9BQVEsRUFBTVAsSUFDWixJQUFLLFdBQWEsSUFDWixFQUFNLElBQUltQyxPQUFPLEVBQUs5RSxTQUFTQyxhQUMvQixFQUFvQixFQUFLRCxTQUFTRSxrQkFDbEMsRUFBb0IsRUFBS0YsU0FBU0csa0JBQ3RDLEVBQUtrRSxTQUFMLFdBQ0EsTUFFRixJQUFLLFdBQ0MsRUFBTSxJQUFJUyxPQUFPLEVBQUs5RSxTQUFTSSxhQUMvQixFQUFvQixFQUFLSixTQUFTSyxrQkFDbEMsRUFBb0IsRUFBS0wsU0FBU00sa0JBQ3RDLEVBQUsrRCxTQUFMLFdBQ0EsTUFFRixJQUFLLFFBQ0MsRUFBTSxJQUFJUyxPQUFPLEVBQUs5RSxTQUFTTyxVQUMvQixFQUFvQixFQUFLUCxTQUFTUSxlQUN0QyxFQUFLNkQsU0FBTCxTQUNBLE1BRUYsSUFBSyxXQUNDLEVBQU0sSUFBSVMsT0FBTyxFQUFLOUUsU0FBU1MsYUFDbkMsRUFBSzRELFNBQUwsT0FDQSxNQUVGLElBQUssT0FDQyxFQUFNLElBQUlTLE9BQU8sRUFBSzlFLFNBQVNVLFNBQ25DLEVBQUsyRCxTQUFMLE9BQ0EsTUFFRixJQUFLLE1BQ0MsRUFBTSxJQUFJUyxPQUFPLEVBQUs5RSxTQUFTVyxRQUMvQixFQUFvQixFQUFLWCxTQUFTWSxhQUNsQyxFQUFvQixFQUFLWixTQUFTYSxhQUN0QyxFQUFLd0QsU0FBTCxXQUNBLE1BRUYsSUFBSyxXQUNvQixFQUFNVSxRQUkzQixFQUFLaEQsVUFBTCxHQUZBLEVBQUtILFVBQUwsR0FJRixNQUVGLElBQUssT0FDSCxJQUFJLEVBQWEsRUFBTW9ELE1BQU0sR0FDakIsS0FBUixFQUNGLEVBQUtwRCxVQUFMLEdBQ1UsRUFBS3FELEtBQUtDLFdBQVcsRUFBS2xGLFNBQVNlLFVBTTdDLEVBQUtnQixVQUFMLElBTEEsRUFBS0gsVUFBTCxLQUNNLEVBQUt1RCxLQUFPLEVBQUtuRixTQUFTYyxXQUM5QixFQUFLYyxVQUFMLElBS0osTUFFRixJQUFLLFdBQ1MsS0FBUixFQUNGLEVBQUtBLFVBQUwsSUFFQSxFQUFLRyxVQUFMLEdBQ0EsRUFBS3dDLGVBQUwsTUFFRixNQUVGLElBQUssaUJBQ0MsRUFBTSxJQUFJTyxPQUFPLEVBQUs5RSxTQUFTZ0IsWUFDL0IsRUFBWSxHQUNaLEVBQVksR0FDaEIsRUFBS3FELFNBQUwsV0FDQSxNQUVGLElBQUssV0FDQyxFQUFNLElBQUlTLE9BQU8sRUFBSzlFLFNBQVNpQixVQUMvQixFQUFZLEVBQ2hCLEVBQUtvRCxTQUFMLFNBQ0EsTUFFRixJQUFLLGNBQ0MsRUFBTSxJQUFJUyxPQUFPLEVBQUs5RSxTQUFTa0IsYUFDL0IsRUFBWSxFQUNaLEVBQVksRUFDaEIsRUFBS21ELFNBQUwsZ0JBU1YsRUF6SkEsSURBdUIsQ0FBYyxDQUNuQ1IsWUFBYSxDQUNYNUQsWUFBYSxZQUNiRSxrQkFBbUIsSUFFckJxQixlQUFjLEVBQ2QwQyxrQkFBbUIsQ0FDakI1RSxhQUFjLG9CQUNkQyxVQUFXLGlCQUNYQyxXQUFZLFFBQ1pDLFdBQVksZUFDWkMsV0FBWSxlQUNaQyxTQUFVLGdCQUNWQyxXQUFZLGtCQUVkNkUsWUFBYSxDQUNYLENBQ0U5QixHQUFJLFdBQVlpQixPQUFRLFNBRTFCLENBQ0VqQixHQUFJLFFBQVNpQixPQUFRLFNBR3pCZSxVQUFXLENBQUMsTUFBTyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tdW5yZXNvbHZlZCAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvZXh0ZW5zaW9ucyAqL1xyXG5pbXBvcnQgSVZhbGlkT2JqIGZyb20gXCIuL2ludGVyZmFjZXMvSXZhbGlkT2JqZWN0XCI7XHJcbmltcG9ydCBJT3B0aW9ucyBmcm9tIFwiLi9pbnRlcmZhY2VzL0lvcHRpb25zXCI7XHJcbmltcG9ydCBJQ2xhc3Nlc0Zvcm0gZnJvbSBcIi4vaW50ZXJmYWNlcy9JY2xhc3Nlc0Zvcm1cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm0ge1xyXG4gIHB1YmxpYyBvcHRpb25zOiBJT3B0aW9ucztcclxuXHJcbiAgcHVibGljIGNsYXNzZXNGb3JtOiBJQ2xhc3Nlc0Zvcm0gPSB7XHJcbiAgICB3cmFwcGVyQ2xhc3M6IFwiY2hlY2tmb3JtLXdyYXBwZXJcIixcclxuICAgIGZvcm1DbGFzczogXCJjaGVja2Zvcm0tZm9ybVwiLFxyXG4gICAgYmxvY2tDbGFzczogXCJibG9ja1wiLFxyXG4gICAgZXJyb3JDbGFzczogXCJibG9ja19fZXJyb3JcIixcclxuICAgIGxhYmVsQ2xhc3M6IFwiYmxvY2tfX2xhYmVsXCIsXHJcbiAgICBidG5DbGFzczogXCJjaGVja2Zvcm0tYnRuXCIsXHJcbiAgICBmb2N1c0NsYXNzOiBcImpzLWlucHV0LWZvY3VzXCIsXHJcbiAgICBibG9ja0Vycm9yQ2xhc3M6IFwiZXJyb3JcIixcclxuICAgIGJsb2NrR29vZENsYXNzOiBcImdvb2RcIixcclxuICAgIG1hc2tDbGFzczogXCJtYXNrXCJcclxuICB9O1xyXG5cclxuICBwdWJsaWMgdmFsaWRPYmo6IElWYWxpZE9iaiA9IHtcclxuICAgIG5pY2tuYW1lUmVnOiAvXlthLXpBLVpdLyxcclxuICAgIG5pY2tuYW1lTWluTGVuZ3RoOiAxLFxyXG4gICAgbmlja25hbWVNYXhMZW5ndGg6IDE1LFxyXG5cclxuICAgIGZ1bGxOYW1lUmVnOiAvXlthLXpBLVpdLywgLy8gL15b0LAt0Y/QkC3Qr9GR0IFdLyxcclxuICAgIGZ1bGxOYW1lTWluTGVuZ3RoOiAxLFxyXG4gICAgZnVsbE5hbWVNYXhMZW5ndGg6IDE1LFxyXG5cclxuICAgIGVtYWlsUmVnOiAvXlthLXpBLVpdLywgLy8gL14oPyEuKkAuKkAuKiQpKD8hLipALiotLS4qLi4qJCkoPyEuKkAuKi0uLiokKSg/IS4qQC4qLSQpKC4qQC4rKC4uezEsMTF9KT8pJC8sXHJcbiAgICBlbWFpbE1pbkxlbmd0aDogMSxcclxuXHJcbiAgICBwYXNzd29yZFJlZzogL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipbMC05XSkoPz0uKlteXFx3XFxzXSkuezYsfS8sIC8vIG1pbiA2IGNoYXJzXHJcblxyXG4gICAgZGF0ZVJlZzogL15cXGR7NH1bLi8tXVxcZHsyfVsuLy1dXFxkezJ9JC8sIC8vIGZpcnN0IHR5cGUgZ2dnZy1tbS1kZCBhbmQgc2VjIHR5cGUgZGQtbW0tZ2dnZyAvXlxcZHsyfVsuLy1dXFxkezJ9Wy4vLV1cXGR7NH0kL1xyXG5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWVzY2FwZVxyXG4gICAgdGVsUmVnOiAvXihcXCg/XFxkezN9XFwpP1tcXC0gXT8pP1tcXGRcXC0gXXs3LDEwfSQvLCAvLyBydXNzaWFuIHRlbCBhbmQgYW1lcmljYW4gdGVsIC9eXFwrPyhcXGR7MSwzfSk/Wy0gLl0/XFwoPyg/OlxcZHsyLDN9KVxcKT9bLSAuXT9cXGRcXGRcXGRbLSAuXT9cXGRcXGRcXGRcXGQkLyxcclxuICAgIHRlbE1pbkxlbmd0aDogMSxcclxuICAgIHRlbE1heExlbmd0aDogMjAsXHJcblxyXG4gICAgZmlsZVNpemU6IDEwMDI1NzExLCAvLyAxMG1iXHJcbiAgICBmaWxlVHlwZTogXCJpbWFnZVwiLFxyXG5cclxuICAgIGJhbmtOdW1iZXI6IC8oPzw9XnxbXjAtOV0pWzAtOV17MTZ9KD89W14wLTldfCQpfFswLTldezR9Wy18IHxfXVswLTldezR9Wy18IHxfXVswLTldezR9Wy18IHxfXVswLTldezR9LywgLy8gYmFuayBjYXJkIG51bWJlcnNcclxuXHJcbiAgICBiYW5rRGF0ZTogL15cXGR7Mn1bLl1cXGR7Mn0kLyxcclxuXHJcbiAgICBiYW5rQmFja051bTogL15cXGR7M30vLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElPcHRpb25zKSB7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgdGhpcy53cmFwcGVyQ2xhc3NlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogd3JhcHBlckNsYXNzc1xyXG4gICAqL1xyXG4gIHB1YmxpYyB3cmFwcGVyQ2xhc3NlcygpIDogdm9pZCB7XHJcbiAgICBsZXQgd3JhcHBlcjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLmNsYXNzZXNGb3JtLndyYXBwZXJDbGFzc31gKTtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuZXJyb3JNZXNzYWdlcyA9PT0gdHJ1ZSkge1xyXG4gICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJlcnJvci1zaG93XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3Itc2hvd1wiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHNob3cgZXJyb3IgbWVzc2FnZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzaG93RXJyb3IoYmxvY2s6IEhUTUxFbGVtZW50KSA6IHZvaWQge1xyXG4gICAgbGV0IHBhcmVudDogSFRNTEVsZW1lbnQgPSBibG9jay5wYXJlbnRFbGVtZW50O1xyXG4gICAgaWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJtYXNrXCIpKSB7XHJcbiAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoYCR7dGhpcy5jbGFzc2VzRm9ybS5ibG9ja0dvb2RDbGFzc31gKTtcclxuICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKGAke3RoaXMuY2xhc3Nlc0Zvcm0uYmxvY2tFcnJvckNsYXNzfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogaGlkZSBlcnJvciBtZXNzYWdlXHJcbiAgICovXHJcbiAgcHVibGljIGhpZGVFcnJvcihibG9jazogSFRNTEVsZW1lbnQpIDogdm9pZCB7XHJcbiAgICBsZXQgcGFyZW50OiBIVE1MRWxlbWVudCA9IGJsb2NrLnBhcmVudEVsZW1lbnQ7XHJcbiAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcIm1hc2tcIikpIHtcclxuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShgJHt0aGlzLmNsYXNzZXNGb3JtLmJsb2NrRXJyb3JDbGFzc31gKTtcclxuICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKGAke3RoaXMuY2xhc3Nlc0Zvcm0uYmxvY2tHb29kQ2xhc3N9YCk7XHJcbiAgfVxyXG59XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby11bnJlc29sdmVkICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9leHRlbnNpb25zICovXHJcbmltcG9ydCBGb3JtIGZyb20gXCIuL2Zvcm1cIjtcclxuaW1wb3J0IElPcHRpb25zIGZyb20gXCIuL2ludGVyZmFjZXMvSW9wdGlvbnNcIjtcclxuaW1wb3J0IElDbGFzc2VzRm9ybSBmcm9tIFwiLi9pbnRlcmZhY2VzL0ljbGFzc2VzRm9ybVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFza0Zvcm0gZXh0ZW5kcyBGb3JtIHtcclxuICBwdWJsaWMgbWFza0lucHV0czogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XHJcblxyXG4gIHB1YmxpYyBtYXNrZWROdW1iZXI6IHN0cmluZztcclxuXHJcbiAgcHVibGljIG1hc2tlZExldHRlcjogc3RyaW5nO1xyXG5cclxuICBjbGFzc2VzRm9ybTogSUNsYXNzZXNGb3JtO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJT3B0aW9ucykge1xyXG4gICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICB0aGlzLm1hc2tJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoZWNrZm9ybV9fbWFza1wiKTtcclxuICAgIHRoaXMubWFza2VkTnVtYmVyID0gXCJYZERtTXlZOVwiO1xyXG4gICAgdGhpcy5zZXR1cE1hc2soKTtcclxuICAgIHRoaXMuYWN0aXZhdGVNYXNrKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzZXR1cE1hc2tcclxuICAgKi9cclxuICBwdWJsaWMgc2V0dXBNYXNrKCkgOiB2b2lkIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXNrSW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMuY3JlYXRlTWFzayh0aGlzLm1hc2tJbnB1dHNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogY3JlYXRlTWFza1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVNYXNrKGlucHV0OiBIVE1MRWxlbWVudCkgOiB2b2lkIHtcclxuICAgIGxldCBwbGFjZWhvbGRlcjogc3RyaW5nID0gaW5wdXQuZ2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIik7XHJcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgYCR7cGxhY2Vob2xkZXIubGVuZ3RofWApO1xyXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiLCBwbGFjZWhvbGRlcik7XHJcbiAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKTtcclxuXHJcbiAgICBsZXQgbWFza0VsZW1lbnQgPSBgPHNwYW4gY2xhc3M9XCIke3RoaXMuY2xhc3Nlc0Zvcm0ubWFza0NsYXNzfVwiPlxyXG4gICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIiBpZD1cIiR7aW5wdXQuaWR9TWFza1wiPjxpPjwvaT4ke3BsYWNlaG9sZGVyfTwvc3Bhbj4ke2lucHV0Lm91dGVySFRNTH08L3NwYW4+YFxyXG4gICAgaW5wdXQub3V0ZXJIVE1MID0gbWFza0VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBhY3RpdmF0ZU1hc2tcclxuICAgKi9cclxuICBwdWJsaWMgYWN0aXZhdGVNYXNrKCkgOiB2b2lkIHtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcclxuICAgIHRoaXMuaGFuZGxlVmFsdWVDaGFuZ2UgPSB0aGlzLmhhbmRsZVZhbHVlQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm1hc2tJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1hc2sgLmNoZWNrZm9ybV9fbWFza1wiKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXNrSW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcclxuICAgICAgdGhpcy5tYXNrSW5wdXRzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZVZhbHVlQ2hhbmdlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogaGFuZGxlVmFsdWVDaGFuZ2VcclxuICAgKi9cclxuICBwdWJsaWMgaGFuZGxlVmFsdWVDaGFuZ2UoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIDogdm9pZCB7XHJcbiAgICBsZXQgaW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5ldmVudC5zcmNFbGVtZW50O1xyXG4gICAgbGV0IGlkID0gaW5wdXQuaWQ7XHJcblxyXG4gICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7IC8vIGV4Y2x1c2lvbiBvZiBzcGVjaWFsIGtleXNcclxuICAgICAgY2FzZSAyMDpcclxuICAgICAgY2FzZSAxNzpcclxuICAgICAgY2FzZSAxODpcclxuICAgICAgY2FzZSAxNjpcclxuICAgICAgY2FzZSAzNzpcclxuICAgICAgY2FzZSAzODpcclxuICAgICAgY2FzZSAzOTpcclxuICAgICAgY2FzZSA0MDpcclxuICAgICAgY2FzZSA5OlxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBpbnB1dC52YWx1ZSA9IGAke3RoaXMuaGFuZGxlQ3VycmVudFZhbHVlKGV2ZW50KX1gO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9TWFza2ApLmlubmVySFRNTCA9IHRoaXMuc2V0VmFsdWVNYXNrKGV2ZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGhhbmRsZUN1cnJlbnRWYWx1ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYW5kbGVDdXJyZW50VmFsdWUoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIDogc3RyaW5nIHtcclxuICAgIGxldCBpbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmV2ZW50LnRhcmdldDtcclxuICAgIGxldCBwbGFjZWhvbGRlcjogc3RyaW5nID0gaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiKTtcclxuICAgIGxldCB2YWx1ZTogc3RyaW5nID0gaW5wdXQudmFsdWU7XHJcbiAgICBsZXQgcGxhY2Vob2xkZXJMZW5ndGg6IG51bWJlciA9IHBsYWNlaG9sZGVyLmxlbmd0aFxyXG4gICAgbGV0IG5ld1ZhbHVlID0gXCJcIjtcclxuICAgIGxldCBzdHJpcHBlZFZhbHVlOiBzdHJpbmcgPSB2YWx1ZS5yZXBsYWNlKC9cXEQvZywgXCJcIik7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgcGxhY2Vob2xkZXJMZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgICAgICBsZXQgaXNJbnQgPSAhaXNOYU4ocGFyc2VJbnQoc3RyaXBwZWRWYWx1ZVtqXSwgMTApKTtcclxuICAgICAgICBsZXQgbWF0Y2hlc051bWJlcjogYm9vbGVhbiA9IHRoaXMubWFza2VkTnVtYmVyLmluZGV4T2YocGxhY2Vob2xkZXJbaV0pID49IDA7XHJcblxyXG4gICAgICAgIGlmIChtYXRjaGVzTnVtYmVyICYmIGlzSW50KSB7XHJcbiAgICAgICAgICBuZXdWYWx1ZSArPSBzdHJpcHBlZFZhbHVlW2orK107XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaGVzTnVtYmVyICYmICFpc0ludCkge1xyXG4gICAgICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuZXdWYWx1ZSArPSBwbGFjZWhvbGRlcltpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3VmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzZXRWYWx1ZU1hc2tcclxuICAgKi9cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xyXG4gIHB1YmxpYyBzZXRWYWx1ZU1hc2soZXZlbnQ6IEtleWJvYXJkRXZlbnQpIDogc3RyaW5nIHtcclxuICAgIGxldCBpbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmV2ZW50LnRhcmdldDtcclxuICAgIGxldCB2YWx1ZTogc3RyaW5nID0gaW5wdXQudmFsdWU7XHJcbiAgICBsZXQgcGxhY2Vob2xkZXI6IHN0cmluZyA9IGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtcGxhY2Vob2xkZXJcIik7XHJcbiAgICByZXR1cm4gYDxpPis3JHt2YWx1ZX08L2k+JHtwbGFjZWhvbGRlci5zdWJzdHIodmFsdWUubGVuZ3RoKX1gO1xyXG4gIH1cclxufSIsIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby11bnJlc29sdmVkICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9leHRlbnNpb25zICovXHJcbmltcG9ydCBNYXNrRm9ybSBmcm9tIFwiLi9tYXNrXCI7XHJcbmltcG9ydCBJVmFsaWRPYmogZnJvbSBcIi4vaW50ZXJmYWNlcy9JdmFsaWRPYmplY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1c3RvbVBhcmFtIGV4dGVuZHMgTWFza0Zvcm0ge1xyXG4gIHZhbGlkT2JqOiBJVmFsaWRPYmo7XHJcblxyXG4gIC8qKlxyXG4gICAqIGN1c3RvbVZhbGlkXHJcbiAgICovXHJcbiAgcHVibGljIGN1c3RvbVZhbGlkKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jdXN0b21WYWxpZCkge1xyXG4gICAgICB0aGlzLnZhbGlkT2JqID0gT2JqZWN0LmFzc2lnbih0aGlzLnZhbGlkT2JqLCB0aGlzLm9wdGlvbnMuY3VzdG9tVmFsaWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coXCJub3RoaW5nIHRvIGN1c3RvbSBpbiB2YWxpZE9ialwiKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogY3VzdG9tQ2xhc3Nlc0Zvcm1cclxuICAgKi9cclxuICBwdWJsaWMgY3VzdG9tQ2xhc3Nlc0Zvcm0oKSA6IHZvaWR7XHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmN1c3RvbUNsYXNzZXNGb3JtKSB7XHJcbiAgICAgIHRoaXMuY2xhc3Nlc0Zvcm0gPSBPYmplY3QuYXNzaWduKHRoaXMuY2xhc3Nlc0Zvcm0sIHRoaXMub3B0aW9ucy5jdXN0b21DbGFzc2VzRm9ybSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIm5vdGhpbmcgdG8gY3VzdG9tIGluIGNsYXNzZXNGb3JtXCIpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tdW5yZXNvbHZlZCAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvZXh0ZW5zaW9ucyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xyXG5pbXBvcnQgXCIuLi9zYXNzL3N0eWxlLnNhc3NcIjtcclxuaW1wb3J0IENoZWNrRm9ybSBmcm9tIFwiLi9jaGVja2Zvcm1cIjtcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbmxldCB2YWxpZDogQ2hlY2tGb3JtID0gbmV3IENoZWNrRm9ybSh7IC8vIGluaXQgY2xhc3NcclxuICBjdXN0b21WYWxpZDoge1xyXG4gICAgbmlja25hbWVSZWc6IC9eW2EtekEtWl0vLFxyXG4gICAgbmlja25hbWVNYXhMZW5ndGg6IDExXHJcbiAgfSxcclxuICBlcnJvck1lc3NhZ2VzOiB0cnVlLFxyXG4gIGN1c3RvbUNsYXNzZXNGb3JtOiB7XHJcbiAgICB3cmFwcGVyQ2xhc3M6IFwiY2hlY2tmb3JtLXdyYXBwZXJcIixcclxuICAgIGZvcm1DbGFzczogXCJjaGVja2Zvcm0tZm9ybVwiLFxyXG4gICAgYmxvY2tDbGFzczogXCJibG9ja1wiLFxyXG4gICAgZXJyb3JDbGFzczogXCJibG9ja19fZXJyb3JcIixcclxuICAgIGxhYmVsQ2xhc3M6IFwiYmxvY2tfX2xhYmVsXCIsXHJcbiAgICBidG5DbGFzczogXCJjaGVja2Zvcm0tYnRuXCIsXHJcbiAgICBmb2N1c0NsYXNzOiBcImpzLWlucHV0LWZvY3VzXCIsXHJcbiAgfSxcclxuICBjaGVja1N1YnN0cjogW1xyXG4gICAge1xyXG4gICAgICBpZDogXCJuaWNrbmFtZVwiLCBzdWJzdHI6IFwia2FyaW1cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6IFwiZW1haWxcIiwgc3Vic3RyOiBcIms0cjFcIlxyXG4gICAgfVxyXG4gIF0sXHJcbiAgYmxhY2tMaXN0OiBbXCJsb2xcIiwgXCJrZWtcIl1cclxufSk7XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby11bnJlc29sdmVkICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9leHRlbnNpb25zICovXHJcbmltcG9ydCBJT3B0aW9ucyBmcm9tIFwiLi9pbnRlcmZhY2VzL0lvcHRpb25zXCI7XHJcbmltcG9ydCBJVmFsaWRPYmogZnJvbSBcIi4vaW50ZXJmYWNlcy9JdmFsaWRPYmplY3RcIjtcclxuaW1wb3J0IElDbGFzc2VzRm9ybSBmcm9tIFwiLi9pbnRlcmZhY2VzL0ljbGFzc2VzRm9ybVwiO1xyXG5pbXBvcnQgQ3VzdG9tUGFyYW0gZnJvbSBcIi4vY3VzdG9tUGFyYW1cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoZWNrRm9ybSBleHRlbmRzIEN1c3RvbVBhcmFtIHtcclxuICB2YWxpZE9iajogSVZhbGlkT2JqO1xyXG5cclxuICBjbGFzc2VzRm9ybTogSUNsYXNzZXNGb3JtO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJT3B0aW9ucykge1xyXG4gICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICB0aGlzLmN1c3RvbUNsYXNzZXNGb3JtKCk7XHJcbiAgICB0aGlzLmN1c3RvbVZhbGlkKCk7XHJcbiAgICB0aGlzLnNldHVwKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldHVwKCkgOiB2b2lkIHtcclxuICAgIGNvbnN0IGJ0bjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLmNsYXNzZXNGb3JtLmJ0bkNsYXNzfWApO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxyXG4gICAgdGhpcy52YWxpZGF0aW9uID0gdGhpcy52YWxpZGF0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXHJcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMudmFsaWRhdGlvbik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVnQ2hlY2sodmFsOiBzdHJpbmcsIGJsb2NrOiBIVE1MRWxlbWVudCwgcmVnOiBSZWdFeHAsIG1pbkxlbmd0aCA9IDAsIG1heExlbmd0aCA9IDEwMDApIDogdm9pZCB7IC8vIGZ1bmN0aW9uIGZvciBjaGVjayByZWdleHBcclxuICAgIGlmICh2YWwubGVuZ3RoIDwgbWluTGVuZ3RoIHx8IHZhbC5sZW5ndGggPiBtYXhMZW5ndGgpIHtcclxuICAgICAgdGhpcy5zaG93RXJyb3IoYmxvY2spO1xyXG4gICAgfSBlbHNlIGlmICghcmVnLnRlc3QodmFsKSkge1xyXG4gICAgICAgIHRoaXMuc2hvd0Vycm9yKGJsb2NrKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5oaWRlRXJyb3IoYmxvY2spO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTdWJzdHJpbmcoYmxvY2ssIHZhbCk7XHJcbiAgICAgICAgdGhpcy5jaGVja0JsYWNrTGlzdChibG9jaywgdmFsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBjaGVja1N1YnN0cmluZyhibG9jazogSFRNTEVsZW1lbnQsIHZhbDogc3RyaW5nKSA6IHZvaWQgeyAvLyBjaGVjayBzdHJpbmcgZm9yIGluY2x1ZGUgc3Vic3RyXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3B0aW9ucy5jaGVja1N1YnN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNoZWNrU3Vic3RyW2ldLmlkID09PSBibG9jay5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkge1xyXG4gICAgICAgIGlmICh2YWwuaW5jbHVkZXModGhpcy5vcHRpb25zLmNoZWNrU3Vic3RyW2ldLnN1YnN0cikpIHtcclxuICAgICAgICAgIHRoaXMuaGlkZUVycm9yKGJsb2NrKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IoYmxvY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGNoZWNrQmxhY2tMaXN0KGJsb2NrOiBIVE1MRWxlbWVudCwgdmFsOiBzdHJpbmcpIDogdm9pZCB7IC8vIGNoZWNrIHN0cmluZyBmb3IgaW5jbHVkZSBzdWJzdHIgZnJvbSBibGFja2xpc3RcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcHRpb25zLmJsYWNrTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodmFsLmluY2x1ZGVzKHRoaXMub3B0aW9ucy5ibGFja0xpc3RbaV0pKSB7XHJcbiAgICAgICAgdGhpcy5zaG93RXJyb3IoYmxvY2spO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgdmFsaWRhdGlvbihldmVudDogRXZlbnQpIDogdm9pZHsgLy8gdmFsaWRhdGlvbiB3aGVuIGNsaWNrIHN1Ym1pdFxyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGlucHV0c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdmFsaWQ9dHJ1ZV1cIik7XHJcbiAgICBpbnB1dHNMaXN0LmZvckVhY2goKGJsb2NrOiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGxldCB2YWw6IHN0cmluZyA9IGJsb2NrLnZhbHVlO1xyXG4gICAgICBzd2l0Y2ggKGJsb2NrLmlkKSB7IC8vIGFsbCBpbnB1dHMgc2hvdWxkIGhhdmUgaWRcclxuICAgICAgICBjYXNlIFwibmlja25hbWVcIjoge1xyXG4gICAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAodGhpcy52YWxpZE9iai5uaWNrbmFtZVJlZyk7XHJcbiAgICAgICAgICBsZXQgbWluTGVuZ3RoOiBudW1iZXIgPSB0aGlzLnZhbGlkT2JqLm5pY2tuYW1lTWluTGVuZ3RoO1xyXG4gICAgICAgICAgbGV0IG1heExlbmd0aDogbnVtYmVyID0gdGhpcy52YWxpZE9iai5uaWNrbmFtZU1heExlbmd0aDtcclxuICAgICAgICAgIHRoaXMucmVnQ2hlY2sodmFsLCBibG9jaywgcmVnLCBtaW5MZW5ndGgsIG1heExlbmd0aCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImZ1bGxuYW1lXCI6IHtcclxuICAgICAgICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKHRoaXMudmFsaWRPYmouZnVsbE5hbWVSZWcpO1xyXG4gICAgICAgICAgbGV0IG1pbkxlbmd0aDogbnVtYmVyID0gdGhpcy52YWxpZE9iai5mdWxsTmFtZU1pbkxlbmd0aDtcclxuICAgICAgICAgIGxldCBtYXhMZW5ndGg6IG51bWJlciA9IHRoaXMudmFsaWRPYmouZnVsbE5hbWVNYXhMZW5ndGg7XHJcbiAgICAgICAgICB0aGlzLnJlZ0NoZWNrKHZhbCwgYmxvY2ssIHJlZywgbWluTGVuZ3RoLCBtYXhMZW5ndGgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJlbWFpbFwiOiB7XHJcbiAgICAgICAgICBsZXQgcmVnID0gbmV3IFJlZ0V4cCh0aGlzLnZhbGlkT2JqLmVtYWlsUmVnKTtcclxuICAgICAgICAgIGxldCBtaW5MZW5ndGg6IG51bWJlciA9IHRoaXMudmFsaWRPYmouZW1haWxNaW5MZW5ndGg7XHJcbiAgICAgICAgICB0aGlzLnJlZ0NoZWNrKHZhbCwgYmxvY2ssIHJlZywgbWluTGVuZ3RoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjoge1xyXG4gICAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAodGhpcy52YWxpZE9iai5wYXNzd29yZFJlZyk7XHJcbiAgICAgICAgICB0aGlzLnJlZ0NoZWNrKHZhbCwgYmxvY2ssIHJlZyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRhdGVcIjoge1xyXG4gICAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAodGhpcy52YWxpZE9iai5kYXRlUmVnKTtcclxuICAgICAgICAgIHRoaXMucmVnQ2hlY2sodmFsLCBibG9jaywgcmVnKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwidGVsXCI6IHtcclxuICAgICAgICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKHRoaXMudmFsaWRPYmoudGVsUmVnKTtcclxuICAgICAgICAgIGxldCBtaW5MZW5ndGg6IG51bWJlciA9IHRoaXMudmFsaWRPYmoudGVsTWluTGVuZ3RoO1xyXG4gICAgICAgICAgbGV0IG1heExlbmd0aDogbnVtYmVyID0gdGhpcy52YWxpZE9iai50ZWxNYXhMZW5ndGg7XHJcbiAgICAgICAgICB0aGlzLnJlZ0NoZWNrKHZhbCwgYmxvY2ssIHJlZywgbWluTGVuZ3RoLCBtYXhMZW5ndGgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJjaGVja2JveFwiOiB7XHJcbiAgICAgICAgICBsZXQgY2hlY2tlZDogYm9vbGVhbiA9IGJsb2NrLmNoZWNrZWQ7XHJcbiAgICAgICAgICBpZiAoIWNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoYmxvY2spO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlRXJyb3IoYmxvY2spO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJmaWxlXCI6IHtcclxuICAgICAgICAgIGxldCBmaWxlOiBGaWxlID0gYmxvY2suZmlsZXNbMF07IC8vIGNoZWNrIGZvciBlbXB0eVxyXG4gICAgICAgICAgaWYgKHZhbCA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dFcnJvcihibG9jayk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCFmaWxlLnR5cGUuc3RhcnRzV2l0aCh0aGlzLnZhbGlkT2JqLmZpbGVUeXBlKSkgeyAvLyBjaGVjayBmb3IgdHlwZSBvZiBmaWxlXHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGJsb2NrKTtcclxuICAgICAgICAgICAgaWYgKCEoZmlsZS5zaXplIDwgdGhpcy52YWxpZE9iai5maWxlU2l6ZSkpIHsgLy8gY2hlY2sgc2l6ZSBmaWxlXHJcbiAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoYmxvY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVFcnJvcihibG9jayk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcInRleHRhcmVhXCI6IHtcclxuICAgICAgICAgIGlmICh2YWwgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoYmxvY2spO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlRXJyb3IoYmxvY2spO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrU3Vic3RyaW5nKGJsb2NrLCB2YWwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJiYW5rQ2FyZE51bWJlclwiOiB7XHJcbiAgICAgICAgICBsZXQgcmVnID0gbmV3IFJlZ0V4cCh0aGlzLnZhbGlkT2JqLmJhbmtOdW1iZXIpO1xyXG4gICAgICAgICAgbGV0IG1heExlbmd0aCA9IDE5O1xyXG4gICAgICAgICAgbGV0IG1pbkxlbmd0aCA9IDEyO1xyXG4gICAgICAgICAgdGhpcy5yZWdDaGVjayh2YWwsIGJsb2NrLCByZWcsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwiYmFua0RhdGVcIjoge1xyXG4gICAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAodGhpcy52YWxpZE9iai5iYW5rRGF0ZSk7XHJcbiAgICAgICAgICBsZXQgbWluTGVuZ3RoID0gNDtcclxuICAgICAgICAgIHRoaXMucmVnQ2hlY2sodmFsLCBibG9jaywgcmVnLCBtaW5MZW5ndGgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJiYW5rQmFja051bVwiOiB7XHJcbiAgICAgICAgICBsZXQgcmVnID0gbmV3IFJlZ0V4cCh0aGlzLnZhbGlkT2JqLmJhbmtCYWNrTnVtKTtcclxuICAgICAgICAgIGxldCBtaW5MZW5ndGggPSAzO1xyXG4gICAgICAgICAgbGV0IG1heExlbmd0aCA9IDM7XHJcbiAgICAgICAgICB0aGlzLnJlZ0NoZWNrKHZhbCwgYmxvY2ssIHJlZywgbWluTGVuZ3RoLCBtYXhMZW5ndGgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=